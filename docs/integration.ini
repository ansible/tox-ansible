[testenv:integration-py3.12-devel]
description = Integration tests using ansible-core devel and python 3.12
skip_install = True
deps =
  ansible-dev-environment>=26.2.0
  pytest>=7.4.3
  pytest-xdist>=3.4.0
  pytest-ansible>=v4.1.1
  ansible-compat>=25.11.0
allowlist_externals =
  ade
  bash
  echo
  git
  sh
commands_pre =
  bash -c 'ade install -e --venv {envdir} --acv devel --no-seed --im none .; rc=$?; if [ $rc -ne 0 ] && [ $rc -ne 2 ]; then exit $rc; fi'
commands =
  python3 -m pytest --ansible-unit-inject-only {toxinidir}/tests/integration
set_env =
  ANSIBLE_COLLECTIONS_PATH=.
  XDG_CACHE_HOME={envdir}/.cache
pass_env =
  GITHUB_TOKEN
